<div class="flex w-full justify-between">
  <xng-breadcrumb></xng-breadcrumb>
</div>
<hr class="mb-6 mt-2 h-[2px] w-full bg-neutral-300" />

<form [formGroup]="feedback" (submit)="uploadFile()" class="flex flex-col">
  <div
    class="flex justify-between rounded-t border border-neutral-200 bg-white p-6"
  >
    <div class="flex flex-col">
      <h1 class="text-xl">{{ documentInfo.documentName }}</h1>
      <p class="text-sm text-gray-400">
        Last Editted: {{ documentInfo.dateLastEdited | date: 'YYYY-MM-dd' }}
      </p>
    </div>
    <div class="min-w-1/3 tems-center flex items-center justify-center gap-2">
      <label
        class="block min-w-fit text-sm font-medium text-gray-900 dark:text-white"
        for="file_input"
        >Upload file</label
      >
      <input
        id="file_input"
        type="file"
        (change)="onFileSelected($event)"
        accept=".pdf"
        class="hidden"
        class="block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 text-sm text-gray-900 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400 dark:placeholder-gray-400"
      />
    </div>
  </div>

  <ngx-extended-pdf-viewer
    [src]="pdfSrc"
    [height]="'auto'"
    [textLayer]="true"
    [showHandToolButton]="true"
  >
  </ngx-extended-pdf-viewer>
  <div class="flex rounded-b border-x border-neutral-200 bg-white p-6">
    <div class="flex w-full flex-col">
      <div class="flex justify-between">
        <h1 class="text-xl text-black">Feedback</h1>
        <div class="flex w-1/4 items-center gap-4">
          <h3>Status</h3>
          <select
            name="status"
            id=""
            formControlName="status"
            [value]="documentInfo.fileStatus"
            class="block w-[25%] grow rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
          >
            <option
              *ngFor="let s of statuses"
              [value]="s.id"
              [selected]="s.id == documentInfo.fileStatus ? 'selected' : null"
            >
              {{ s.value }}
            </option>
          </select>
        </div>
      </div>
      <textarea
        name=""
        formControlName="feedback"
        id=""
        class="block w-1/2 rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
        rows="5"
        placeholder="Write your feedback here..."
      ></textarea>
    </div>
  </div>
  <div
    class="flex justify-end rounded-b border border-neutral-200 bg-white p-6"
  >
    <button
      class="rounded bg-lime-600 px-6 py-3 text-center text-white hover:bg-lime-700"
      type="submit"
    >
      Save
    </button>
  </div>
</form>
