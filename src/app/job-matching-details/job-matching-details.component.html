<app-main-template>
  <div class="flex w-full justify-between">
    <h1 class="text-3xl">Job Matching Details</h1>
  </div>
  <hr class="mb-2 mt-2 h-[2px] w-full bg-neutral-300" />
  <div class="flex gap-6">
    <div class="grow">
      <h3 class="mb-4 text-xl font-semibold">
        Multi-Factor Evaluation Process (MFEP) Results for
        {{ student.firstName }}
        {{ student.lastName }}
      </h3>
      <div class="relative grow overflow-x-auto shadow-md sm:rounded-lg">
        <table
          class="w-full text-left text-sm text-neutral-800 dark:text-gray-400 rtl:text-right"
        >
          <thead
            class="text-md bg-neutral-100 text-center text-neutral-800 dark:bg-gray-700 dark:text-gray-400"
          >
            <tr>
              <th scope="col" class="px-6 py-3">Company</th>
              <th scope="col" class="px-6 py-3">MFEP Result</th>
              <th scope="col" class="px-6 py-3">Recommendation Rate</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let company of companies"
              class="border-b bg-white text-center hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"
            >
              <th
                scope="row"
                class="whitespace-nowrap px-6 py-4 font-medium text-gray-900 dark:text-white"
              >
                {{ company[0] }}
              </th>
              <td>{{ company[1][1].toFixed(4) }}</td>
              <td>{{ ((company[1][1] / 4) * 100).toFixed(2) }}%</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="w-[5%] grow" *ngIf="(role | async) == 'student'">
      <h3 class="mb-4 text-xl font-semibold">Custom Criteria Weight Ranking</h3>
      <div
        class="mb-3 w-full rounded-lg border-2 border-amber-300 bg-yellow-50 shadow"
        *ngIf="criteriaRank == null"
      >
        <div class="mt-4 flex gap-3 px-4">
          <div class="grow">
            <ng-icon
              name="matLightbulbRound"
              size="24px"
              class="text-amber-300"
            ></ng-icon>
          </div>
          <p class="grow text-sm italic">
            You currently do not have a custom ranking. This will help to
            customize your priorities when looking for a job offer, with the
            most important criteria first.
          </p>
        </div>
        <div class="flex items-end justify-end">
          <a
            [routerLink]="['/criteriaRanking/' + userID]"
            class="p-4 font-medium text-amber-500 hover:text-amber-400"
          >
            Edit Ranking >
          </a>
        </div>
      </div>
      <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
        <table
          class="w-full text-left text-sm text-neutral-800 dark:text-gray-400 rtl:text-right"
        >
          <thead
            class="text-md bg-neutral-100 text-center text-neutral-800 dark:bg-gray-700 dark:text-gray-400"
          >
            <tr>
              <th scope="col" class="px-4 py-3">Rank</th>
              <th scope="col" class="px-4 py-3">Criteria</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let criteria of criteriaList; let i = index"
              class="border-b bg-white text-center hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"
            >
              <td class="py-4 font-medium">{{ i + 1 }}</td>
              <td>{{ criteria }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div
        class="mt-3 w-full rounded-lg border-2 border-amber-300 bg-yellow-50 shadow"
        *ngIf="criteriaRank != null"
      >
        <div class="mt-4 flex gap-3 px-4">
          <div class="grow">
            <ng-icon
              name="matLightbulbRound"
              size="24px"
              class="text-amber-300"
            ></ng-icon>
          </div>
          <p class="grow text-sm italic">
            This ranking displays your priorities when looking for a job offer,
            with the most important criteria first.
          </p>
        </div>
        <div class="flex items-end justify-end">
          <a
            [routerLink]="['/criteriaRanking/' + userID]"
            class="p-4 font-medium text-amber-500 hover:text-amber-400"
          >
            Edit Ranking >
          </a>
        </div>
      </div>
    </div>
  </div>
  <hr class="mb-2 mt-2 h-[2px] w-full bg-neutral-300" />
  <h3 class="mb-4 text-xl font-semibold">
    Complete Normalized Table of MFEP Results
  </h3>
  <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <table
      class="w-full text-left text-sm text-neutral-800 dark:text-gray-400 rtl:text-right"
    >
      <thead
        class="text-md bg-neutral-100 text-center text-neutral-800 dark:bg-gray-700 dark:text-gray-400"
      >
        <tr>
          <th scope="col" class="px-4 py-3">Company</th>
          <th scope="col" class="px-4 py-3">Relevance</th>
          <th scope="col" class="px-4 py-3">Scope of Work</th>
          <th scope="col" class="px-4 py-3">Career Development</th>
          <th scope="col" class="px-4 py-3">Location</th>
          <th scope="col" class="px-4 py-3">Setup</th>
          <th scope="col" class="px-4 py-3">Field</th>
          <th scope="col" class="px-4 py-3">Allowance</th>
          <th scope="col" class="bg-emerald-200 px-6 py-3">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let company of companies"
          class="border-b bg-white text-center hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600"
        >
          <th
            scope="row"
            class="whitespace-nowrap px-6 py-4 font-medium text-gray-900 dark:text-white"
          >
            {{ company[0] }}
          </th>
          <td>{{ company[1][0][0][0].toFixed(4) }}</td>
          <td>{{ company[1][0][0][1].toFixed(4) }}</td>
          <td>{{ company[1][0][0][2].toFixed(4) }}</td>
          <td>{{ company[1].locScore.toFixed(4) }}</td>
          <td>{{ company[1].setupScore.toFixed(4) }}</td>
          <td>{{ company[1].fieldScore.toFixed(4) }}</td>
          <td>{{ company[1].paidScore.toFixed(4) }}</td>
          <td class="bg-emerald-100">{{ company[1][1].toFixed(4) }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</app-main-template>
<app-loading></app-loading>
