<app-main-template>
  <div
    class="block w-full rounded-lg border border-gray-200 bg-white p-4 shadow"
  >
    <!-- Announcement 1 -->
    <div class="flex w-full justify-between">
      <h2 class="text-2xl font-semibold">
        {{ announcement?.title }}
      </h2>
      <div class="flex">
        <button
          type="button"
          class="rounded-full border-2 border-blue-500 bg-gray-100 px-2 py-1 text-center text-sm font-medium text-blue-500"
        >
          {{ announcement?.batch }}
        </button>
        <!-- Dropdown -->
        <button
          id="menu2"
          data-dropdown-toggle="dropdown2"
          class="inline-flex items-center rounded-lg p-2 text-center text-sm font-medium dark:bg-gray-800 dark:text-white dark:hover:bg-gray-700 dark:focus:ring-gray-600"
          type="button"
          *ngIf="(role | async) == 'coordinator'"
        >
          <ng-icon
            name="matMoreVertOutline"
            size="16px"
            class="mr-0 text-gray-500 hover:text-gray-400"
          ></ng-icon>
        </button>

        <!-- Dropdown menu -->
        <div
          id="dropdown2"
          class="w-30 z-10 hidden divide-y divide-gray-100 rounded-lg bg-white shadow dark:divide-gray-600 dark:bg-gray-700"
        >
          <ul
            class="py-2 text-sm text-gray-700 dark:text-gray-200"
            aria-labelledby="menu2"
          >
            <li>
              <button
                (click)="toggleModal(2, undefined)"
                class="w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
              >
                Edit
              </button>
            </li>
            <li>
              <button
                (click)="toggleModal(3, undefined)"
                class="w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
              >
                Delete
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <hr class="mb-2 mt-3 h-[1px] w-full bg-neutral-300" />

    <div class="flex justify-between">
      <h2 class="text-lg font-medium text-gray-700">
        {{ announcement?.name }}
      </h2>
      <div class="flex-col justify-end italic">
        <h2
          *ngIf="
            announcement?.formattedDateCreated &&
            !announcement?.formattedDateEdited
          "
          class="mr-1 mt-2 text-sm font-normal text-gray-400"
        >
          Posted on: {{ announcement?.formattedDateCreated }}
        </h2>
        <h2
          *ngIf="
            announcement?.formattedDateCreated &&
            announcement?.formattedDateEdited
          "
          class="mr-1 mt-2 text-sm font-normal text-gray-400"
        >
          Last edited: {{ announcement?.formattedDateEdited }}
        </h2>
      </div>
    </div>
    <p class="my-8 ml-8 text-base font-normal">
      {{ announcement?.announcement }}
    </p>

    <!-- MODALS -->
    <!-- Edit Announcement -->
    <app-modal
      *ngIf="idNum === 2"
      [isOpen]="isModalOpen"
      (eventToggleModal)="toggleModal(2, $event)"
    >
      <h1 class="mb-4 grow text-center text-xl font-semibold">
        Edit Announcement
      </h1>

      <form [formGroup]="editForm" (submit)="saveAnnouncement()">
        <div class="input-group mb-4">
          <h4 class="text-base font-medium text-neutral-600">Subject</h4>
          <input
            type="text"
            formControlName="editSubject"
            class="border-[1px]rounded-md w-full rounded border border-gray-300 bg-gray-50 px-3 py-2 text-xs dark:border-neutral-600"
          />
        </div>
        <div class="input-group mb-4">
          <label
            for="edit-AYTermIntake"
            class="block text-base font-medium text-neutral-600 dark:text-white"
            >Batch
          </label>
          <select
            id="edit-AYTermIntake"
            class="block w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
            formControlName="editAYTermIntake"
          >
            <option value="AY23-24 T1">AY23-24 T1</option>
            <option value="AY23-24 T2">AY23-24 T2</option>
            <option value="AY23-24 T1">AY23-24 T1</option>
            <option value="AY22-23 T3">AY22-23 T3</option>
            <option value="AY22-23 T2">AY22-23 T2</option>
          </select>
        </div>
        <hr class="mb-6 mt-2 h-[2px] w-full bg-neutral-300" />
        <div
          class="mb-4 w-full rounded-lg border border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-700"
        >
          <div class="rounded-t-lg bg-white px-4 py-2 dark:bg-gray-800">
            <textarea
              id="announcement1"
              rows="4"
              class="w-full border-0 bg-white px-0 text-sm text-gray-900 focus:ring-0 dark:bg-gray-800 dark:text-white dark:placeholder-gray-400"
              required
              formControlName="editMessage"
            ></textarea>
          </div>
          <div
            class="flex items-center justify-between border-t px-3 py-2 dark:border-gray-600"
          >
            <div class="flex space-x-1 ps-0 sm:ps-2 rtl:space-x-reverse">
              <button
                type="button"
                class="inline-flex cursor-pointer items-center justify-center rounded p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white"
              >
                <svg
                  class="h-4 w-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 12 20"
                >
                  <path
                    stroke="currentColor"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M1 6v8a5 5 0 1 0 10 0V4.5a3.5 3.5 0 1 0-7 0V13a2 2 0 0 0 4 0V6"
                  />
                </svg>
                <span class="sr-only">Attach file</span>
              </button>
              <button
                type="button"
                class="inline-flex cursor-pointer items-center justify-center rounded p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-600 dark:hover:text-white"
              >
                <svg
                  class="h-4 w-4"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 18"
                >
                  <path
                    d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"
                  />
                </svg>
                <span class="sr-only">Upload image</span>
              </button>
            </div>
          </div>
        </div>
        <button
          class="flex w-full items-center justify-center gap-3 rounded bg-lime-700 px-6 py-2 hover:bg-lime-600 dark:bg-lime-700 dark:hover:bg-lime-600"
          type="submit"
        >
          <p class="text-xs font-medium text-white">Save</p>
        </button>
      </form>
    </app-modal>

    <!-- Delete Announcement -->
    <app-modal
      *ngIf="idNum === 3"
      [isOpen]="isModalOpen"
      (eventToggleModal)="toggleModal(3, $event)"
    >
      <h1 class="mb-2 grow text-center text-xl font-semibold">
        Delete Announcement
      </h1>
      <div class="text-center">
        <p class="text-sm font-normal">
          Are you sure in deleting this post? This cannot be undone.
        </p>
      </div>
      <hr class="mb-4 mt-2 h-[2px] w-full bg-neutral-300" />
      <form [formGroup]="deleteForm" (submit)="deleteAnnouncement()">
        <div class="mb-3 ml-6 mr-6 flex place-items-center">
          <h3 class="grow text-base font-medium">Subject</h3>
          <input
            value="wewefsd"
            type="text"
            class="border-[1px]rounded-md w-[60%] rounded border border-gray-300 bg-gray-50 px-3 py-1 text-sm dark:border-neutral-600"
            formControlName="deleteSubject"
          />
        </div>
        <div class="mb-3 ml-6 mr-6 flex place-items-center">
          <h3 class="grow text-base font-medium">Batch</h3>
          <input
            value="AYCHUCHU"
            type="text"
            class="border-[1px]rounded-md w-[60%] rounded border border-gray-300 bg-gray-50 px-3 py-1 text-sm dark:border-neutral-600"
            formControlName="deleteAYTermIntake"
          />
        </div>
        <div class="mb-3 ml-6 mr-6 flex-col place-items-center">
          <h3 class="mb-2 grow text-base font-medium">Announcement</h3>
          <input
            value=""
            type="textrea"
            class="border-[1px]rounded-md w-full rounded border border-gray-300 bg-gray-50 px-3 py-1 text-sm dark:border-neutral-600"
            formControlName="deleteMessage"
          />
        </div>

        <button
          class="mt-6 flex w-full items-center justify-center gap-3 rounded bg-lime-700 px-6 py-2 hover:bg-lime-600 dark:bg-lime-700 dark:hover:bg-lime-600"
          type="submit"
        >
          <p class="text-xs font-medium text-white">Confirm</p>
        </button>
      </form>
    </app-modal>
  </div>
</app-main-template>
